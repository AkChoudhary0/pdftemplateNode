<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dubai Itinerary - Taj Royal Travels</title>
    <style>
        @page {
            size: A4;
            margin: 0;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: #2c3e50;
            background: #fff;
        }

        .header img.hero {
            width: 100%;
            max-height: 250px;
            object-fit: cover;
            margin: auto;
            display: flex;
            justify-content: center;
            margin-bottom: 5px;
        }

        .logo {
            text-align: center;
            margin: 0;
        }

        .logo img {
            max-width: 150px;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .title {
            text-align: center;
            font-size: 30px;
            font-weight: bold;
            color: #336666;
            margin: 5px 0;
        }

        .details {
            text-align: center;
            font-size: 14px;
            line-height: 1.4;
            margin: 0 0 15px 0;
            color: #aaaaaa;
            margin-bottom: 0px;
            font-weight: 550;
        }

        .section,
        .container-section {
            width: 90%;
            /* match PDF width */
            margin: auto;
        }

        .section h2 {
            text-align: center;
            font-size: 20px;
            color: #336666;
            font-weight: 600;
            /* border-bottom: 2px solid #336666; */
            padding-bottom: 3px;
            margin: 10px 0;
        }

        .hotel-card {
            display: flex;
            border: 1px solid #ccc;
            border-radius: 8px;
            align-items: center;
            overflow: hidden;
            gap: 14px;
            margin-bottom: 15px;
        }

        .hotel-card img {
            width: 140px;
            height: 100px;
            object-fit: cover;
        }

        .hotel-info {
            padding: 8px;
            flex: 1;
        }

        .hotel-info h3 {
            margin: 0;
            font-size: 12px;
        }

        .hotel-info h3 span {
            color: red;
        }

        .hotel-info p {
            margin: 2px 0;
            font-size: 14px;
        }

        /* --- Itinerary Styles --- */
        .day-label {
            font-size: 14px;
            color: #555;
            font-weight: 500;
            margin: 20px 0 10px 0;
        }

        .day-label span {
            color: #f37a20;
        }

        .day-block {
            padding-bottom: 0px;
            margin-bottom: 0px;
            border-bottom: 1px solid #ccc;
            overflow: hidden;
        }

        .day-block img {
            width: 35%;
            float: left;
            margin-right: 20px;
            border-radius: 4px;
        }

        .day-block h2 {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .day-block .tag {
            font-size: 14px;
            line-height: 1.4;
            margin: 0 0 15px 0;
            color: #aaaaaa;
            font-weight: 550;
        }

        .tag-name {
            font-size: 14px;
            line-height: 1.4;
            margin: 0 0 15px 0;
            color: #aaaaaa;
            font-weight: 550;
        }

        .day-block p {
            font-size: 14px;
            line-height: 1.6;
            margin: 0 0 10px 0;
        }

        .day-block em {
            font-size: 13px;
            color: #555;
        }

        .detail-title {
            text-align: left !important;
        }


        .section-title {
            color: #006666;
            margin-bottom: 15px;
            font-size: 18px;
            text-transform: uppercase;
        }

        .list {
            margin: 0;
            padding-left: 20px;
            font-size: 12px;
        }

        .list-item {
            margin-bottom: 8px;
            font-size: 12px;
        }

        .cancel-policy {
            font-size: 12px;
        }

        .cancel-policy p {
            margin-bottom: 10px;
        }

        /* Responsive for mobile */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .container-section {
            width: 90%;
            margin: auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        .outer-section {
            margin-bottom: 20px;
        }

        .footer-section {
            width: 90%;
            margin: auto;
        }

        .tours-title {
            color: #ff6600;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .tours-list {
            padding-left: 20px;
            margin: 0;
            font-size: 13px;
        }

        .tours-item {
            margin-bottom: 8px;
            font-weight: 550;
            font-size: 14px;
        }

        .why-title {
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 20px;
            margin-top: 0px;
        }

        .quotation-body {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .quotation-image {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .quotation-image img {
            width: 150px;
            height: 150px;
            border-radius: 10px;
        }

        .quotation-info h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #444;
            margin-top: 0px;
        }

        .quotation-info p {
            font-size: 1rem;
            margin: 5px 0;
        }

        .quotation-info strong {
            color: #000;
        }

        .quotation-footer {
            margin-top: 15px;
            border-bottom: 2px solid #336666;
        }

        .images-section {
            display: flex;
            justify-content: left;
            align-items: center;
            margin-top: 5px;
        }

        .images-section img {
            width: 82px;
            float: left;
            margin-right: 20px;
            border-radius: 4px;
            height: 60px;
        }

        .icons-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            text-align: center;
        }

        .icon-box {
            flex: 0 1 120px;
        }

        .icon-box img {
            width: 35px;
            height: 35px;
            margin-bottom: 8px;
        }

        .icon-text {
            font-size: 13px;
        }

        .note {
            font-size: 14px;
            margin-top: 20px;
        }

        .note strong {
            color: #000;
        }

        .footer {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            font-size: 14px;
            margin-bottom: 30px;
        }

        .footer-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-item img {
            width: 20px;
            height: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {


            .footer {
                flex-direction: column;
                gap: 15px;
            }
        }

        .tours-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            /* 2 columns */
            gap: 8px;
            /* space between items */
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .tours-item {
            background-color: #f7f7f7;
            padding: 8px 12px;
            border-radius: 6px;
        }

        .hotel-outer {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            /* 2 cards per row */
            gap: 20px;
        }

        .quotation-row {
            display: flex;
            justify-content: space-between;
            /* space between the two cards */
            gap: 20px;
            /* spacing between cards */
            flex-wrap: wrap;
            /* allow stacking on smaller screens */
        }

        .quotation-card {
            flex: 1;
            /* make both cards equal width */
            min-width: 300px;
            /* prevent cards from getting too small */
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 90%;
            margin: 20px auto 10px auto;
        }

        .header-top .logo img {
            width: 140px;
            height: auto;
        }

        .agency-info {
            text-align: right;
            font-size: 13px;
            color: #004d40;
            line-height: 0.8;
        }

        .agency-info h3 {
            font-size: 16px;
            font-weight: 600;
            color: #00796b;
            margin: 0 0 4px 0;
        }

        @media print {
            .header-top {
                page-break-inside: avoid;
            }
        }
    </style>
</head>

<body>

    <!-- Hero Image -->
    <div class="header">
        <img src="http://localhost:3020/uploads/images/dubai8.jpeg" alt="Dubai" class="hero">
    </div>

    <!-- Logo -->
    <!-- <div class="logo">
        <img src="http://localhost:3020/uploads/images/logo.jpeg" alt="Taj Royal Travels Logo">
    </div> -->

    <!-- Header Top: Logo Left, Address Right -->
    <div class="header-top">
        <div class="logo"> {{logo}} </div>
        <div class="agency-info">
            <h3>DUBAI</h3>
            <p>Guest Name: <strong>{{hostName}}</strong></p>
            <p>{{night}} Nights / {{day}} Days | For {{adult}} Adults,
                {{child}} Child, {{infant}} Infant</p>
            <p>{{checkin}} to {{checkout}}</p>
        </div>
    </div> <!-- Title -->
    <!-- Details -->
    <!-- <div class="title">DUBAI</div> 
    <div class="details"> Guest Name: {{hostName}} <br> {{night}} Nights / {{day}} Days | For {{adult}} Adults,
        {{child}} Child, {{infant}} Infant <br> {{checkin}} to {{checkout}} </div> -->

    <!-- {{logo}} -->

    <!-- Title -->
    <!-- <div class="title">DUBAI</div> -->

    <!-- Details -->
    <!-- <div class="details">
        Guest Name: {{hostName}} <br> -->
    <!-- Query Id.: #QID027404 <br> -->
    <!-- {{night}} Nights / {{day}} Days | For {{adult}} Adults, {{child}} Child, {{infant}} Infant <br>
        {{checkin}} to {{checkout}}
    </div> -->


    <div class="footer-section">
        <h2 class="tours-title">Tours:</h2>
        <ul class="tours-list">
            {{toursList}}
        </ul>
    </div>

    {{price}}



    <!-- Destinations Covered -->
    <div class="section" id="hotelSection">
        <h2>HOTELS</h2>
        <p style="text-align:center;" class="details">UAE</p>
    </div>

    <!-- Hotel Section -->
    <div class="section">
        <div class="hotel-outer" id="hotelContainer"></div>
    </div>
    <!-- <div class="section">
        <div class="hotel-outer">
            <div class="hotel-card">
                <img src={{hotelImage}} alt="{{hotelName}}">
                <div class="hotel-info">
                    <h3>{{hotelName}} <span>({{hotelStar}}Star)</span></h3>
                    <p><b>Staying Dates:</b> {{checkin}} - {{checkout}}</p>
                    <p><b>Destination:</b> Dubai</p>
                    <p><b>Meal Plan:</b> Breakfast</p>
                </div>
            </div>

            <div class="hotel-card">
                <img src="{{hotelImage}}" alt="{{hotelName}}">
                <div class="hotel-info">
                    <h3>{{hotelName}} <span>({{hotelStar}} Star)</span></h3>
                    <p><b>Staying Dates:</b> {{checkin}} - {{checkout}}</p>
                    <p><b>Destination:</b> Dubai</p>
                    <p><b>Meal Plan:</b> Breakfast</p>
                </div>
            </div>

        </div>
    </div> -->

    <!-- Itinerary Section -->
    <div class="section" id="itinerary">
        <h2>Itinerary</h2>
        <!-- Days will be injected here -->
        <!-- <div class="quotation-row">
            <div class="quotation-card">
                <div class="quotation-body">

                    <div class="quotation-info">
                        <h2 class="title">{{airportPickup}} PICK UP</h2>
                        <p class="subtitle">{{pickupSic}}</p>
                        <h3>Cab</h3>
                        <p>
                            <strong>No. Of Vehicle:</strong> 1
                        </p>
                        <p>
                            <strong>Start Date:</strong> {{checkin}}
                        </p>
                        <p>Dubai airport to Hotel transfer</p>
                    </div>
                </div>

                <div class="quotation-image">
                    <img src="http://localhost:3020/uploads/images/car1.webp" alt="Cab" />
                </div>


                <div class="quotation-footer"></div>
            </div>
            <div class="quotation-card">
                <div class="quotation-body">

                    <div class="quotation-info">
                        <h2 class="title">DUBAI {{airportDrop}}</h2>
                        <p class="subtitle">{{isSic}}</p>
                        <h3>Cab</h3>
                        <p>
                            <strong>No. Of Vehicle:</strong> 1
                        </p>
                        <p>
                            <strong>Start Date:</strong> 25-12-2025
                        </p>
                        <p>Hotel to Dubai airport transfer</p>
                    </div>
                </div>

                <div class="quotation-image">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSyZlW3xp-nOee3fslZNUKOGBKoDhQmlBBYeA&s"
                        alt="Cab" />
                </div>

                <div class="quotation-footer"></div>
            </div>
        </div> -->
    </div>

    <!-- <div class="section">
        <div
            style="display:flex; justify-content:space-between; align-items:center; border: 1px solid #336666; padding:15px 20px; border-radius:10px; font-family:Arial, sans-serif; margin:20px auto;">

            <h3 style="margin:0; font-size:1.2rem; font-weight:600; color:#336666;">
                Total Net Price
            </h3>

            <span style="font-size:1.2rem; font-weight:bold; color:#000;">
                ${{dollar}}, AED {{aed}}, INR {{inr}}
            </span>
        </div>
    </div> -->

    <div class="container-section">
        <!-- Left Column -->
        <div>
            <div class="outer-section">
                <h2 class="section-title">Inclusions</h2>
                <ul class="list">
                    {{inclusions}}
                </ul>
            </div>
        </div>

        <!-- Right Column -->
        <div>
            <div class="outer-section">
                <h2 class="section-title">Exclusions</h2>
                <ul class="list">
                    {{exclusions}}
                </ul>
            </div>
        </div>
    </div>


    <div class="container-section">
        <div>
            <div class="outer-section">
                <h2 class="section-title">Important Notes</h2>
                <ul class="list">
                    <li class="list-item">Ensure you have all necessary travel documents including passports, flight
                        tickets, visa, hotel vouchers, and travel insurance.</li>
                    <li class="list-item">Check the local currency of your destination and exchange currency in advance.
                    </li>
                    <li class="list-item">Inform your bank about your travel dates to avoid any issues with your
                        debit/credit cards.</li>
                    <li class="list-item">Save our emergency contact number in your phone: +971 542122766.</li>
                    <li class="list-item">Carry necessary medications and prescriptions.</li>
                    <li class="list-item">Check the weather forecast for your destination and pack accordingly.</li>
                    <li class="list-item">Include appropriate clothing, especially for any specific activities.</li>
                    <li class="list-item">Keep yourself updated on local news, travel advisories, and safety
                        precautions.</li>
                </ul>
            </div>
        </div>
        <div>
            <div class="outer-section cancel-policy">
                <h2 class="section-title">Cancellation Policy</h2>
                <p>
                    For more interesting packages visit us at <strong>tajroyaltourism.com/</strong>. Above rates are
                    subject to availability. Cancellation charges as per company policies. In case we are not able to
                    provide same hotels as mentioned, similar alternatives will be arranged, and any difference in price
                    will be advised.
                </p>
                <p>
                    Package price does not include expenses of personal nature such as laundry, telephone calls, room
                    service, alcoholic beverages, camera fees, etc. Services not mentioned in inclusions will be charged
                    extra.
                </p>
                <p>
                    Hotel check-in and check-out times as per their policies. Guests must carry valid photo IDâ€™s
                    (Driving License, Passport, Voter Card).
                </p>
            </div>
        </div>
    </div>


    <!-- Why Section -->
    <div class="footer-section">
        <h2 class="why-title">WHY YOU SHOULD BOOK PACKAGES FROM TAJ ROYAL TRAVELS?</h2>
        <div class="icons-row">
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/best_price.png" alt="Best Price">
                <div class="icon-text">Best Price Guaranteed</div>
            </div>
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/expert.png" alt="Expert">
                <div class="icon-text">Destination Experts</div>
            </div>
            <!-- <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/emi.png" alt="EMI">
                <div class="icon-text">EMI Options</div>
            </div> -->
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/support.png" alt="Support">
                <div class="icon-text">On Trip Support</div>
            </div>
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/customize.png" alt="Customized">
                <div class="icon-text">Customized Package</div>
            </div>
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/local_expert.png" alt="Local Experts">
                <div class="icon-text">Local Experts</div>
            </div>
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/hasle_free.png" alt="Booking">
                <div class="icon-text">Hassle-free Booking</div>
            </div>
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/positive_review.png" alt="Review">
                <div class="icon-text">Positive Review</div>
            </div>
            <div class="icon-box">
                <img src="http://localhost:3020/uploads/images/24_7.png" alt="24 Hours">
                <div class="icon-text">24/7 Support</div>
            </div>
        </div>
    </div>

    <!-- Note -->
    <div class="footer-section">
        <p class="note"><strong>Note:</strong> Above give quote is based on current rate of exchange. If rate of
            exchange
            changes at the time of final billing, then package quote will change accordingly**.</p>
    </div>
    <!-- Footer -->
    <div class="footer">
        <div class="footer-item">
            <img src="https://flagcdn.com/w40/ae.png" alt="UAE Flag" width="50" height="15"
                style="width: 20px; height: 15px !important;">

            <span>+971 542122766</span>
        </div>
        <div class="footer-item">
            <img src="https://flagcdn.com/w40/in.png" alt="India Flag" width="50" height="15"
                style="width: 20px; height: 15px !important;">
            <span>+91 9371000044</span>
        </div>
        <div class="footer-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope"
                viewBox="0 0 16 16">
                <path
                    d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
            </svg>
            <span>tajroyaltourism44@gmail.com</span>
        </div>
        <div class="footer-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-browser-chrome" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M16 8a8 8 0 0 1-7.022 7.94l1.902-7.098a3 3 0 0 0 .05-1.492A3 3 0 0 0 10.237 6h5.511A8 8 0 0 1 16 8M0 8a8 8 0 0 0 7.927 8l1.426-5.321a3 3 0 0 1-.723.255 3 3 0 0 1-1.743-.147 3 3 0 0 1-1.043-.7L.633 4.876A8 8 0 0 0 0 8m5.004-.167L1.108 3.936A8.003 8.003 0 0 1 15.418 5H8.066a3 3 0 0 0-1.252.243 2.99 2.99 0 0 0-1.81 2.59M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4" />
            </svg>
            <span>www.tajroyaltourism.com/</span>
        </div>
    </div>

    <!-- <script>
        // Injected from server-side (make sure it's stringified JSON!)
        // const itinerary = JSON.parse('{{itineraryData}}')
        const itinerary = JSON.parse(`{{itineraryData}}`);
     
        const itineraryContainer = document.querySelector("#itinerary");

        // First, group all items by day
        const groupedByDay = itinerary.reduce((acc, item) => {
            if (!acc[item.day]) acc[item.day] = [];
            acc[item.day].push(item);
            return acc;
        }, {});

        // Then, iterate through each group (day)
        Object.keys(groupedByDay).sort((a, b) => a - b).forEach(day => {
            const items = groupedByDay[day];

            // Create single label for the day
            const dayLabel = document.createElement("div");
            dayLabel.className = "day-label";
            dayLabel.innerHTML = `<span>&#9733;</span> DAY ${day} <span>&#9654;</span>`;

            // Create container for all items of this day
            const dayBlock = document.createElement("div");
            dayBlock.className = "day-block";

            // Loop through each location in the same day
            items.forEach(item => {
                const section = document.createElement("div");
                section.className = "location-section";
                section.innerHTML = `
      <h2 class="detail-title">${item.title} <span class="tag-name">(${item.tag})</span> </h2>
      ${item.description.map(d => `<p>${d}</p>`).join("")}
      <div class="images-section">
        <img src="${item.img}" alt="${item.title}">
        <img src="${item.img1}" alt="${item.title}">
        <img src="${item.img2}" alt="${item.title}">
      </div>

      <hr>
    `;
                dayBlock.appendChild(section);
            });

            // Append both to container
            itineraryContainer.appendChild(dayLabel);
            itineraryContainer.appendChild(dayBlock);
        });





        // itinerary.forEach(item => {
        //     // Create day label
        //     const dayLabel = document.createElement("div");
        //     dayLabel.class = "day-label";
        //     dayLabel.innerHTML = `<span>&#9733;</span> DAY ${item.day} <span>&#9654;</span>`;

        //     // Create day block
        //     const dayBlock = document.createElement("div");
        //     dayBlock.class = "day-block";
        //     dayBlock.innerHTML = `

        //     <h2 class="detail-title">${item.title}</h2>
        //     <div class="tag">${item.tag}</div>
        //     ${item.description.map(d => `<p>${d}</p>`).join("")}
        //     <div class="images-section">
        //       <img src="${item.img}" alt="${item.title}">
        //       <img src="${item.img1}" alt="${item.title}">
        //       <img src="${item.img2}" alt="${item.title}">
        //     </div>
        //     <br>
        //     ${item.note ? `<p><em>${item.note}</em></p>` : ""}
        // `;

        //     itineraryContainer.appendChild(dayLabel);
        //     itineraryContainer.appendChild(dayBlock);
        // });

        // --- HOTEL SECTION ---
         const hotels = JSON.parse(`{{hotelData}}`);
         

        const hotelContainer = document.getElementById("hotelContainer");
        hotels.forEach(hotel => {
            let Breakfast = hotel.isBreakfastIncluded ? "Breakfast" : null;
            const card = document.createElement("div");
            card.className = "hotel-card";
            card.innerHTML = `
      <img src="http://localhost:3020/${hotel._doc.image}" alt="${hotel._doc.name}">
      <div class="hotel-info">
        <h3>${hotel._doc.name} <span>(${hotel._doc.star} Star)</span></h3>
        <p><b>Staying Dates:</b> ${hotel.checkIn || "-"} - ${hotel.checkOut || "-"}</p>
        <p><b>Destination:</b> ${hotel._doc.address}</p>
        <p><b>Meal Plan:</b> ${Breakfast}</p>
      </div>
    `;
            hotelContainer.appendChild(card);
        });


    </script> -->

    <script>
        // âœ… Parse injected JSON safely
        const itinerary = JSON.parse(`{{itineraryData}}`);
        const hotels = JSON.parse(`{{hotelData}}`);
        // const hotels = [
        //     {
        //         "name": "THE CANVAS HOTEL BUR DUBAI",
        //         "checkIn": "2025-12-27",
        //         "checkOut": "2026-01-02",
        //         "breakfastIncluded": true,
        //         "hotelPrice": 50000
        //     },
        //     {
        //         "name": "THE CANVAS HOTEL BUR DUBAI",
        //         "checkIn": "2025-12-27",
        //         "checkOut": "2026-01-02",
        //         "breakfastIncluded": true,
        //         "hotelPrice": 50000
        //     },
        //     {
        //         "name": "THE CANVAS HOTEL BUR DUBAI",
        //         "checkIn": "2025-12-27",
        //         "checkOut": "2026-01-02",
        //         "breakfastIncluded": true,
        //         "hotelPrice": 50000
        //     }
        // ]

        const itineraryContainer = document.querySelector("#itinerary");
        const hotelContainer = document.getElementById("hotelContainer");

        // -----------------------------
        // ðŸ—“ï¸ ITINERARY SECTION
        // -----------------------------
        if (Array.isArray(itinerary) && itinerary.length > 0) {
            // Group by "day"
            const groupedByDay = itinerary.reduce((acc, item) => {
                if (!acc[item.day]) acc[item.day] = [];
                acc[item.day].push(item);
                return acc;
            }, {});

            // Render day-wise
            Object.keys(groupedByDay)
                .sort((a, b) => a - b)
                .forEach(day => {
                    const items = groupedByDay[day];

                    // Day label
                    const dayLabel = document.createElement("div");
                    dayLabel.className = "day-label";
                    dayLabel.innerHTML = `<span>&#9733;</span> DAY <strong>${day}</strong> <span>&#9654;</span>`;

                    // Day block
                    const dayBlock = document.createElement("div");
                    dayBlock.className = "day-block";

                    items.forEach(item => {
                        const section = document.createElement("div");
                        section.className = "location-section";

                        // Image section
                        const imageSection = [item.img, item.img1, item.img2]
                            .filter(Boolean)
                            .map(img => `<img src="${img}" alt="${item.title}">`)
                            .join("");

                        // Description section
                        const descriptionHTML = Array.isArray(item.description)
                            ? item.description.map(d => `<p>${d}</p>`).join("")
                            : "";

                        // Render HTML for this item
                        section.innerHTML = `
                        <h2 class="detail-title">
                            ${item.title}
                            <span class="tag-name">(${item.tag || ""})</span>
                        </h2>
                        ${descriptionHTML}
                        <div class="images-section">${imageSection}</div>
                        ${item.note ? `<p class="note"><em>${item.note}</em></p>` : ""}
                        <hr>
                    `;

                        dayBlock.appendChild(section);
                    });

                    itineraryContainer.appendChild(dayLabel);
                    itineraryContainer.appendChild(dayBlock);
                });
        } else {
            itineraryContainer.innerHTML = `<p>No itinerary details available.</p>`;
        }

        // -----------------------------
        // ðŸ¨ HOTEL SECTION
        // -----------------------------
        if (Array.isArray(hotels) && hotels.length > 0) {
            hotels.forEach(hotel => {
                const h = hotel._doc || hotel; // Handle nested mongoose-style doc
                const Breakfast = hotel.isBreakfastIncluded ? "Breakfast" : "-";

                // Handle image path
                const imageUrl = h.image
                    ? (h.image.startsWith("http") ? h.image : `http://localhost:3020/${h.image}`)
                    : "https://via.placeholder.com/300x200?text=No+Image";

                const card = document.createElement("div");
                card.className = "hotel-card";
                card.innerHTML = `
                <img src="${imageUrl}" alt="${h.name}">
                <div class="hotel-info">
                    <h3>${h.name} <span>(${h.star || "-"} Star)</span></h3>
                    <p><b>Staying Dates:</b> ${hotel.checkIn || "-"} - ${hotel.checkOut || "-"}</p>
                    <p><b>Destination:</b> ${h.address || "-"}</p>
                    <p><b>Meal Plan:</b> ${Breakfast}</p>
                </div>
            `;
                hotelContainer.appendChild(card);
            });
        } else {
            hotelContainer.innerHTML = `<p>No hotel details available.</p>`;
        }
    </script>


</body>

</html>